# yaml 配置
version: "3.6"
services:
  run_consul:
    container_name: consul_service
    restart: always
    network_mode: "host"
    volumes:
      - {{ deploy_dir }}/{{consul_dir_name}}/config/consul.json:{{consul_docker_path}}/consul.json
      - {{ deploy_dir }}/{{consul_dir_name}}/log:{{consul_docker_path}}/log
      - {{ deploy_dir }}/{{consul_dir_name}}/data-dir:{{consul_docker_path}}/data-dir
    image: {{ice_via_consul_image[0]["name"]}}:{{ice_via_consul_image[0]["tag"]}}
    command: 
      - sh
      - -c
      - |

          {{consul_docker_path}}/consul agent -config-file {{consul_docker_path}}/consul.json 
